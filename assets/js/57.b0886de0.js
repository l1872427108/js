(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{455:function(t,e,r){"use strict";r.r(e);var s=r(56),v=Object(s.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"xmlhttprequest"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#xmlhttprequest"}},[t._v("#")]),t._v(" XMLHttpRequest")]),t._v(" "),r("h3",{attrs:{id:"xml的创建"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#xml的创建"}},[t._v("#")]),t._v(" XML的创建")]),t._v(" "),r("ol",[r("li",[r("p",[t._v("创建 XML 对象。来执行实际的网络请求操作。")])]),t._v(" "),r("li",[r("p",[t._v("为 XML 对象注册回调函数\n网络请求比较耗时，所以要注册回调函数。")]),t._v(" "),r("ul",[r("li",[t._v("ontimeout 用来监控超时请求。如果请求超时了，改函数会被调用。")]),t._v(" "),r("li",[t._v("onerror 监控出错信息，后台请求出错了，就会被调用。")]),t._v(" "),r("li",[t._v("onreadystatechange 监控后台请求过程的状态。可以监控到 HTTP 头加载完成的消息，HTTP 响应体以及数据加载完成的消息等。")])])]),t._v(" "),r("li",[r("p",[t._v("配置基础的请求信息\n配置请求信息，通过 open 配置一些基础请求信息。")])])]),t._v(" "),r("p",[t._v("然后通过 xhr 内部属性配置一些其他信息。\n- xhr.timeout = 3000;\n- xhr.responseType 配置服务器返回的格式。  json/text")]),t._v(" "),r("ol",{attrs:{start:"4"}},[r("li",[t._v("发起请求\nxhr.send 来发起网络请求。")])]),t._v(" "),r("p",[t._v("渲染进程会将请求发送给网络进程，网络进程来负责资源的下载，等网络进程接收到数据之后，就会利用 IPC 来通知渲染进程。渲染进程接收到消息之后，会将 xhr 的回调函数封装成任务并添加到消息队列中。等主线程循环系统执行到该任务的时候，来调用。")]),t._v(" "),r("ul",[r("li",[t._v("如果出错了，执行 xhr.onerror.")]),t._v(" "),r("li",[t._v("如果超时了，执行 xhr.ontimeout")]),t._v(" "),r("li",[t._v("如果正常的数据接收，执行 onreadystatechange 来反馈。")])]),t._v(" "),r("h3",{attrs:{id:"xml的注意事项"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#xml的注意事项"}},[t._v("#")]),t._v(" XML的注意事项")]),t._v(" "),r("ol",[r("li",[t._v("跨域问题\n同源策略的影响。 可以看到下面的警告信息。")])]),t._v(" "),r("p",[t._v("Access to XMLHttpRequest at 'http' from origin 'http://' has ...")]),t._v(" "),r("ol",{attrs:{start:"2"}},[r("li",[t._v("HTTPS 混合内容的问题\nHTTPS 混合内容是 HTTPS 页面中包含了不符合 HTTPS 安全要求的内容，比如包含了 HTTP 资源，通过 HTTP 加载的图像、视频、样式表、脚本等。")])]),t._v(" "),r("p",[t._v("索然有时候报警告也能访问。")]),t._v(" "),r("p",[t._v("Mixed Content: The page at 'http://' was loaded over HTTPS. ...")]),t._v(" "),r("p",[t._v("而使用 XMLHttpRequest 请求时，浏览器认为这种请求可能是攻击者发起的，会阻止此类危险的请求。就会报错。")])])}),[],!1,null,null,null);e.default=v.exports}}]);